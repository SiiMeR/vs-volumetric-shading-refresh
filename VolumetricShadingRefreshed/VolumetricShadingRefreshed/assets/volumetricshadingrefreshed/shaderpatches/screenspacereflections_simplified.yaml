# Simplified Screen Space Reflections Patches
# Reduced from 12 patches to 3 essential core patches only
# All other SSR functionality moved to dedicated renderers

# 1. Final composite integration (no alternative - must patch core final.fsh)
- type: token
  filename: final.fsh
  tokens: '#if BLOOM == 1'
  snippet: ssrfinalcomposite.txt

# 2. Water transparency core integration (essential for proper water rendering)
- type: token
  filename: chunkliquid.fsh
  tokens: texColor.a += (max(0, diff/16 + noise/(12 - 8*min(1,windSpeed))) + vn / 4) / clamp(fresnel, 0.5, 1);
  content: |
    texColor.a += (max(0, diff/16 + noise/(12 - 8*min(1,windSpeed))) + vn / 4) / clamp(fresnel, 0.5, 1);
    #if VSMOD_SSR > 0
    texColor.a *= VSMOD_SSR_WATER_TRANSPARENCY;
    #endif

# 3. Disable conflicting effects (prevent conflicts with built-in shiny effects)
- type: token
  filename: chunktransparent.fsh
  tokens: '#if SHINYEFFECT > 0'
  content: "#if SHINYEFFECT > 0 && VSMOD_SSR == 0\n"
